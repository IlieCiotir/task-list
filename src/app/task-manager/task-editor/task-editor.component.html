<form novalidate *ngIf="taskForm" [ngrxFormState]="taskForm">
    <div class="field">
        <label [for]="taskForm.controls.title.id">Title:</label>
        <input [ngrxFormControlState]="taskForm.controls.title" />
        <small *ngIf="taskForm.controls.title.isInvalid">{{taskForm.controls.title.errors | json}}</small>
    </div>
    <div class="field">
        <label for="description">Description:</label>
        <textarea id="description" [ngrxFormControlState]="taskForm.controls.description"></textarea>
    </div>
    <div class="field">
        <label for="dueDate">Due date:</label>
        <input id="dueDate" [ngrxFormControlState]="taskForm.controls.dueDate" type="date" />
    </div>
    <div class="field">
        <label for="done">Done:</label>
        <input id="done" [ngrxFormControlState]="taskForm.controls.done" type="checkbox" />
    </div>
    <div class="field" *ngIf="taskForm.controls.importance.userDefinedProperties['visible']">
        <label for="importance">Importance:</label>
        <select id="importance" [ngrxFormControlState]="taskForm.controls.importance">
            <option value="low">Low</option>
            <option value="normal">Normal</option>
            <option value="high">High</option>
        </select>
    </div>
    <!--
    <div class="field-group" formGroupName="asignee">
        <div class="field">
            <label for="firstName">First name:</label>
            <input id="firstName" formControlName="firstName" />
            <small *ngIf="taskForm.controls.asignee.controls.firstName.invalid">
                {{taskForm.controls.asignee.controls.firstName.errors | json}}</small>
        </div>
    </div>
    <div class="subscriber-list" formArrayName="subscribers">
        <button (click)="addSubscriber()" type="button">Add Subscriber</button>
        <div *ngFor="let subscriber of subscribers.controls; index as index" class="field">
            <label [for]="index">Due date:</label>
            <input [id]="index" [formControlName]="index" type="email" />
        </div>
    </div>
    -->
    {{taskForm.errors | json}}

    {{counter()}}
    <button type="submit" [disabled]="taskForm.isInvalid" (click)="submitTask()">Submit</button>
</form>